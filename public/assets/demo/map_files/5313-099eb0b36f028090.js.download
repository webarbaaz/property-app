!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dcbdd655-8c1d-4411-9354-a79c6bedf9f6",e._sentryDebugIdIdentifier="sentry-dbid-dcbdd655-8c1d-4411-9354-a79c6bedf9f6")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5313],{75313:function(e,t,r){r.d(t,{I:function(){return et}});var l=r(97458),n=r(3553),s=r(86775),a=r(25288),u=r(52983);let i=e=>{let{children:t}=e,[r]=(0,u.useState)(()=>new s.S({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,refetchIntervalInBackground:!1,retry:!1}}}));return(0,l.jsx)(a.aH,{client:r,children:t})};var o=r(88825),c=r(48070),d=r(18714),f=r(42011),h=r(65847),p=r(76698),w=r(98702);let g=()=>{let e=(0,f.d)();(0,u.useEffect)(()=>{let t=setInterval(async()=>{if(e)try{let e=(0,p.zP)(h.yP);if(e.length){if(!(await (0,w.J)(e)).success)return;(0,p.dV)(h.yP)}}catch(e){console.error("Error checking and sending pending events:",e)}},h.y7);return()=>clearInterval(t)},[e])};var v=e=>{let{children:t}=e;return g(),t},y=r(77887),F=r(83648),m=r(64456),b=r(24399),_=r(7616),j=r(26521),x=r(72118),E=r(1850);let I={group:[{name:"type",show:!0},{name:"license",show:!0},{name:"iconType",show:!0}],show:!0},V=E.z.object({group:E.z.array(E.z.object({name:E.z.string().max(60).regex(/^[a-z0-9_-]+$/i),show:E.z.boolean()})).default(I.group),show:E.z.boolean().default(I.show)}),S=x.Z.withConverter({write:e=>e}),k=()=>{let e;let t="filters-configs";return{get:()=>{try{let e=S.get(t);if(!e)return null;return V.parse(JSON.parse(e))}catch(e){return null}},set:r=>{clearTimeout(e),e=setTimeout(()=>{S.set(t,JSON.stringify(r),{expires:7})},150)}}},z=(e,t,r)=>{let l=e.group.findIndex(e=>e.name===t);return l>-1?[...e.group.slice(0,l),{name:t,show:r},...e.group.slice(l+1)]:[...e.group,{name:t,show:r}]},O=(e,t)=>{var r,l;return null!==(l=null===(r=e.group.find(e=>e.name===t))||void 0===r?void 0:r.show)&&void 0!==l&&l},N=(()=>{var e;let t=k(),r=null!==(e=t.get())&&void 0!==e?e:I,l=e=>{r=e,t.set(e)},n=e=>t=>{l({...r,[e]:t})},s=n("group");return{get:()=>r,set:l,setShow:n("show"),setGroup:s,groupIsVisible:e=>O(r,e),updateGroupVisibility:(e,t)=>s(z(r,e,t))}})();var C=r(34529),D=r(85585);let A=e=>((0,C.Pu)([[D.sb,e]]),{updateNewSearchAtom:(0,C.lV)((0,u.useCallback)((e,t,r)=>{t(D.sb,r)},[]))});var T=r(49144),G=r(68883),P=r(19152);let q=e=>{var t;let{activeFilters:r}=e,l=(0,_.Dv)(P._$),n=(0,u.useMemo)(()=>(0,T.oq)(r,void 0,l),[r,l]);return(0,C.Pu)([[P.lh,n],[G.GD,null!==(t=T.wF.lastFilterValue("term",n))&&void 0!==t?t:""],[G.r9,!1],[G.tj,T.wF.lastFilterValue("type",n)],[G.LB,T.wF.lastFilterValue("format",n)||T.FILTERS_CONFIG.format.defaultValue],[G.a3,T.wF.lastFilterValue("license",n)],[G.Kn,T.wF.lastFilterValue("aiGenerated",n)]]),{updateSearchFilters:(0,C.lV)((0,u.useCallback)((e,t,r)=>{var n;let s=(0,T.oq)(r,void 0,l);t(P.lh,s),t(G.GD,null!==(n=T.wF.lastFilterValue("term",s))&&void 0!==n?n:""),t(G.r9,!1),t(G.tj,T.wF.lastFilterValue("type",s)),t(G.LB,T.wF.lastFilterValue("format",s)||T.FILTERS_CONFIG.format.defaultValue),t(G.a3,T.wF.lastFilterValue("license",s)),t(G.Kn,T.wF.lastFilterValue("aiGenerated",s))},[l]))}},L=e=>{let{children:t,initialActiveFilters:r,isNewSearchEnabled:l}=e,{updateSearchFilters:n}=q({activeFilters:null!=r?r:[]}),{updateNewSearchAtom:s}=A(null!=l&&l);return(0,u.useEffect)(()=>{n(null!=r?r:[])},[r,n]),(0,u.useEffect)(()=>{s(null!=l&&l)},[l,s]),t},R=e=>{let{children:t,initialActiveFilters:r,isNewSearchEnabled:n=!1}=e,s=(0,u.useRef)((0,b.MT)());return s.current.sub(j.zs,()=>{let e=s.current.get(j.zs);N.set({...e,group:Object.entries(e.expanded).map(e=>{let[t,r]=e;return{name:t,show:r}})})}),(0,l.jsx)(_.zt,{store:s.current,children:(0,l.jsx)(L,{initialActiveFilters:r,isNewSearchEnabled:n,children:t})})};var B=r(41286),M=r(47153),H=r(21595),J=r(26758),K=r(11032),Z=r(41843);let Q={downloads:0,limit_downloads:0},W=e=>{var t,r;return{...e,user_type_fr:null!==(r=({"payment-user":"payment"})[null!==(t=e.user_type_fr)&&void 0!==t?t:""])&&void 0!==r?r:e.user_type_fr}},$=(e,t)=>{let[r,l]=(0,_.KO)(Z.Zn),s=r&&"id"in r&&!!(null==r?void 0:r.wallet_id),a=(0,n.Kg)(),i=(0,B.Q)(e),o=(0,_.b9)(H.Qq);(0,u.useEffect)(()=>{let r=async()=>{let r=K.f.get();if(!r)try{r=await (0,J.F)(),K.f.set(r)}catch(t){null==e||e()}l(r?W(r):Q),null==t||t(r)};"1"!==x.Z.get("FP_MBL")?(K.f.remove(),null==t||t(),l(Q)):r()},[e,t,l]),(0,u.useEffect)(()=>{if(!a||!s)return;let e=M.s.get();if(X(r,e)){e.storedAt||(e.storedAt=Date.now(),M.s.set(e)),o(e);return}"1"!==x.Z.get("FP_MBL")?M.s.remove():i()},[a,s,o,i,r])},X=(e,t)=>{if(!t)return!1;let r=new Date().setHours(0,0,0,0);return(!t.storedAt||!(t.storedAt<r))&&t.walletId===e.wallet_id},U=e=>{let{children:t,onError:r,onSuccess:l}=e;return $(r,l),t};var Y=r(61158);let ee=e=>{let{children:t}=e;return(0,l.jsx)(U,{onSuccess:e=>{if(!e){Y.av({username:"anonymous"});return}Y.av({id:e.id,username:e.login,email:e.email})},children:t})},et=e=>{let{initialActiveFilters:t,country:r,children:s,gaCookie:a,userInfo:u,isNewSearchEnabled:f}=e;return(0,l.jsx)(d.F,{userInfo:u,children:(0,l.jsxs)(R,{initialActiveFilters:t,isNewSearchEnabled:null!=f&&f,children:[(0,l.jsx)(y.H,{country:r,children:(0,l.jsx)(o.sH,{children:(0,l.jsxs)(i,{children:[(0,l.jsx)(n.vF,{}),(0,l.jsx)(ee,{children:(0,l.jsx)(c.Il,{children:(0,l.jsx)(m.f,{gaCookie:a,children:(0,l.jsx)(v,{children:s})})})})]})})}),(0,l.jsx)(er,{})]})})},er=()=>{let e=(0,F.useRouter)();return(0,u.useEffect)(()=>{let t=e.prefetch;return e.prefetch=async()=>{},()=>{e.prefetch=t}},[e]),null}},26758:function(e,t,r){r.d(t,{F:function(){return n}});var l=r(26305);let n=async()=>{try{let e=await fetch("/xhr/logged-user-data",{headers:{"Content-Type":"application/json",Accepts:"application/json","X-Requested-With":"xmlhttprequest"}});if(!e.ok)throw Error("Error fetching user data");let t=await e.json();return l.fs.parse(t)}catch(e){throw e&&e instanceof Error&&console.error(JSON.stringify({fatal_error:e.message})),Error("Error fetching user data")}}}}]);